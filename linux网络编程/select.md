<!--
 * @Author: zzzzztw
 * @Date: 2023-03-07 14:21:29
 * @LastEditors: Do not edit
 * @LastEditTime: 2023-03-07 15:14:40
 * @FilePath: /cpptest/linux网络编程/select.md
-->
# select的用法
1. 什么是 I/O 多路复用
I/O 多路复用的设计初衷就是解决这样的场景。我们可以把标准输入、套接字等都看做 I/O 的一路，多路复用的意思，就是在任何一路 I/O 有“事件”发生的情况下，通知应用程序去处理相应的 I/O 事件，这样我们的程序就变成了“多面手”，在同一时刻仿佛可以处理多个 I/O 事件。
2. 使用 select 函数，通知内核挂起进程，当一个或多个 I/O 事件发生后，控制权返还给应用程序，由应用程序进行 I/O 事件的处理。
```cpp
最大监听描述符限制 1024
int select(int maxfd, fd_set *readset, fd_set *writeset, fd_set *exceptset, const struct timeval *timeout);
返回：若有就绪描述符则为其数目，若超时则为 0，若出错则为 -1

```
在这个函数中，maxfd 表示的是待测试的描述符基数，它的值是待测试的最大描述符加 1。
紧接着的是三个描述符集合，分别是读描述符集合 readset、写描述符集合 writeset 和异常描述符集合 exceptset，这三个分别通知内核，在哪些描述符上检测数据可以读，可以写和有异常发生。
三个描述符集合中的每一个都可以设置成空，这样就表示不需要内核进行相关的检测。
timeout设置成不同的值，会有不同的可能：
第一个可能是设置成空 (NULL)，表示如果没有 I/O 事件发生，则 select 一直等待下去。
第二个可能是设置一个非零的值，这个表示等待固定的一段时间后从 select 阻塞调用中返回。
第三个可能是将 tv_sec 和 tv_usec 都设置成 0，表示根本不等待，检测完毕立即返回。这种情况使用得比较少。